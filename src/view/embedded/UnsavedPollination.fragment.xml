<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:c="sap.ui.core"
>

    <!-- outer alignment: species + controls at top, buttons at bottom -->
    <VBox 
        class="sapUiSmallMargin"
        height="94%"
        justifyContent="SpaceBetween">

        <!-- species -->
        <VBox>
            <FormattedText
                htmlText="&lt;strong&gt;{
                    path: 'newPollinationsModel>seed_capsule_plant_id'
                }&lt;/strong&gt; 
                    {
                    path: 'newPollinationsModel>seedCapsulePlantName'
                } &lt;strong&gt;â˜“&lt;/strong&gt; 
                    &lt;strong&gt;{
                    path: 'newPollinationsModel>pollen_donor_plant_id'
                }&lt;/strong&gt; 
                    {
                    path: 'newPollinationsModel>pollenDonorPlantName'
                }"
                class="sapUiTinyMarginBottom"
            />
            <Label
                class="sapUiTinyMarginBottom"
                visible="{=
                    !!${newPollinationsModel>florescence_comment}
                }"
                text="[{newPollinationsModel>florescence_comment}]"
                tooltip="{newPollinationsModel>florescence_id} ({newPollinationsModel>florescence_comment})"
            />

            <HBox
                class="sapUiTinyMarginBottom"
            >
                <DateTimePicker
                    width="11rem"
                    displayFormat="yyyy-MM-dd HH:mm"
                    valueFormat="yyyy-MM-dd HH:mm"
                    value="{
                        path: 'newPollinationsModel>pollinated_at'
                    }"
                    placeholder="Enter Date"
                    showCurrentTimeButton="true"
                />
                <!-- todo -->
                <!-- app:inputId="inpHarvestDate" -->
                <Button
                    icon="sap-icon://calendar"
                    type="Transparent"
                    press=".onPressSetNowButton"
                />
            </HBox>
            <HBox>
                <Label
                    text="Flowers"
                    class="sapUiTinyMarginEnd"
                />
                <StepInput
                    width="3rem"
                    max="9"
                    min="1"
                    required="true"
                    textAlign="Center"
                    value="{newPollinationsModel>count_attempted}"
                />
            </HBox>
            <VBox class="sapUiTinyMarginBottom">
                <HBox
                    alignItems="Center"
                    justifyContent="SpaceBetween"
                >
                    <HBox alignItems="Center">
                        <Label
                            text="Pollen Quality"
                            class="sapUiTinyMarginEnd"
                            vAlign="Middle"
                        />
                        <!-- todo newPollinationsModel>pollen_quality currently good/bad, but must be true/false -->
                        <Switch
                            state="{newPollinationsModel>goodPollenQuality}"
                            customTextOn="+"
                            customTextOff="-"
                            tooltip="Pollen Quality: Good / Bad"
                        >
                            <layoutData>
                                <FlexItemData growFactor="1" />
                            </layoutData>
                        </Switch>
                    </HBox>
                    <GenericTag
                        text="{
                            path: 'newPollinationsModel>pollen_type'
                        }"
                        design="StatusIconHidden"
                        status="{= (${newPollinationsModel>pollen_type} === 'fresh' ? 'Success' : 'Information') }"
                    />
                </HBox>
            </VBox>
            <HBox
                justifyContent="SpaceBetween"
                alignItems="Center"
                class="sapUiTinyMarginBottom"
            />
            <SegmentedButton
                selectedKey="{
                    path: 'newPollinationsModel>location'
                }"
                class="sapUiTinyMarginBottom"
                width="14rem"
            >
                <items>
                    <SegmentedButtonItem
                        text="{i18n>AppView.Indoor}"
                        key="indoor"
                    />
                    <SegmentedButtonItem
                        text="{i18n>AppView.IndoorLED}"
                        key="indoor_led"
                    />
                    <SegmentedButtonItem
                        text="{i18n>AppView.Outdoor}"
                        key="outdoor"
                    />
                </items>
            </SegmentedButton>
            <HBox>
                <ColorPalette
                    colorSelect=".onColorSelect"
                    colors="{
                        path: 'newPollinationsModel>',
                        formatter: '.getAvailableColorsForUnsavedPollination'
                    }"
                />
                <FlexBox alignItems="Center">
                    <core:Icon
                        src="sap-icon://color-fill"
                        color="{
                            path: 'newPollinationsModel>label_color_rgb'
                        }"
                        size="3rem"
                    >
                        <core:layoutData>
                            <FlexItemData growFactor="1" />
                        </core:layoutData>
                    </core:Icon>
                </FlexBox>
            </HBox>
        
        </VBox>

        <!-- buttons -->
        <HBox
            justifyContent="SpaceBetween"
            class="sapUiTinyMarginTop"
        >
            <Button
                text="Discard"
                type="Negative"
                press=".onPressDeleteNewPollinationButton"
            />
            <Button
                enabled="{= !!${newPollinationsModel>label_color_rgb} &amp;&amp;
                    ${newPollinationsModel>label_color_rgb} !== 'transparent'}"
                text="Save"
                type="Emphasized"
                press=".onPressSaveNewPollinationButton"
            />
        </HBox>

    </VBox>
</c:FragmentDefinition>