<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:c="sap.ui.core"
>
    <!-- outer alignment: species + controls at top, buttons at bottom -->
    <VBox
        class="sapUiSmallMargin"
        height="94%"
        justifyContent="SpaceBetween"
    >
        <!-- species -->
        <VBox>
            <HBox>
                <VBox
                    class="sapUiTinyMarginEnd">
                    <Image
                        width="80px"
                        densityAware="true"
                        visible="{= !!${newPollinationsModel>seed_capsule_plant_preview_image_id} }"
                        src="{
                            path: 'newPollinationsModel>seed_capsule_plant_preview_image_id',
                            formatter: '.formatter.getImageUrlAvatarL'
                        }"
                        class="roundedBorders"
                    />
                    <Image
                        width="80px"
                        densityAware="true"
                        visible="{= !!${newPollinationsModel>pollen_donor_plant_preview_image_id} }"
                        src="{
                            path: 'newPollinationsModel>pollen_donor_plant_preview_image_id',
                            formatter: '.formatter.getImageUrlAvatarL'
                        }"
                        class="roundedBorders"
                    />
                    <!-- <Image
                        width="80px"
                        densityAware="true"
                        visible="{= !!${newPollinationsModel>seed_capsule_plant_preview_image_id} }"
                        src="{
                            path: 'newPollinationsModel>seed_capsule_plant_preview_image_id',
                            formatter: '.formatter.getImageUrlAvatarL'
                        }"
                        class="roundedBorders"
                    /> -->
                </VBox>
                <VBox>
                    <FormattedText
                        htmlText="&lt;strong&gt;{
                            path: 'newPollinationsModel>seed_capsule_plant_id'
                        }&lt;/strong&gt; 
                            {
                            path: 'newPollinationsModel>seedCapsulePlantName'
                        } &lt;strong&gt;â˜“&lt;/strong&gt; 
                            &lt;strong&gt;{
                            path: 'newPollinationsModel>pollen_donor_plant_id'
                        }&lt;/strong&gt; 
                            {
                            path: 'newPollinationsModel>pollenDonorPlantName'
                        }"
                        class="sapUiTinyMarginBottom"
                    />
                    <HBox justifyContent="SpaceBetween">
                        <Label
                            class="sapUiTinyMarginBottom"
                            visible="{=
                                !!${newPollinationsModel>florescence_comment}
                            }"
                            text="[{newPollinationsModel>florescence_comment}]"
                            tooltip="{newPollinationsModel>florescence_id} ({newPollinationsModel>florescence_comment})"
                        />
                        <GenericTag
                            class="sapUiTinyMarginBegin"
                            text="{
                                path: 'newPollinationsModel>pollen_type'
                            }"
                            design="StatusIconHidden"
                            status="{= (${newPollinationsModel>pollen_type} === 'fresh' ? 'Success' : 'Information') }"
                        />
                    </HBox>
                </VBox>
            </HBox>
            <HBox class="sapUiTinyMarginBottom">
                <DateTimePicker
                    width="11rem"
                    displayFormat="yyyy-MM-dd HH:mm"
                    valueFormat="yyyy-MM-dd HH:mm"
                    value="{
                        path: 'newPollinationsModel>pollinated_at'
                    }"
                    placeholder="Enter Date"
                    showCurrentTimeButton="true"
                />
                <!-- todo -->
                <!-- app:inputId="inpHarvestDate" -->
                <Button
                    icon="sap-icon://calendar"
                    type="Transparent"
                    press=".onPressSetNowButton"
                />
            </HBox>
            <HBox justifyContent="SpaceBetween">
                <VBox>
                    <Label
                        text="Flowers"
                        class="sapUiTinyMarginEnd"
                    />
                    <StepInput
                        width="3rem"
                        max="9"
                        min="1"
                        required="true"
                        textAlign="Center"
                        value="{newPollinationsModel>count_attempted}"
                    />
                </VBox>
            <!-- <VBox class="sapUiTinyMarginBottom">
                <HBox
                    alignItems="Center"
                    justifyContent="SpaceBetween"
                > -->
                    <VBox alignItems="Center">
                        <Label
                            text="Pollen Quality"
                            class="sapUiTinyMarginEnd"
                            vAlign="Middle"
                        />
                        <!-- todo newPollinationsModel>pollen_quality currently good/bad, but must be true/false -->
                        <Switch
                            state="{newPollinationsModel>goodPollenQuality}"
                            customTextOn="+"
                            customTextOff="-"
                            tooltip="Pollen Quality: Good / Bad"
                        >
                            <layoutData>
                                <FlexItemData growFactor="1" />
                            </layoutData>
                        </Switch>
                    </VBox>
                    <!-- <GenericTag
                        text="{
                            path: 'newPollinationsModel>pollen_type'
                        }"
                        design="StatusIconHidden"
                        status="{= (${newPollinationsModel>pollen_type} === 'fresh' ? 'Success' : 'Information') }"
                    /> -->
                <!-- </HBox>
            </VBox> -->
            </HBox>
            <HBox
                justifyContent="SpaceBetween"
                alignItems="Center"
                class="sapUiTinyMarginBottom"
            />
            <SegmentedButton
                selectedKey="{
                    path: 'newPollinationsModel>location'
                }"
                class="sapUiTinyMarginBottom"
                width="14rem"
            >
                <items>
                    <SegmentedButtonItem
                        text="{i18n>AppView.Indoor}"
                        key="indoor"
                    />
                    <SegmentedButtonItem
                        text="{i18n>AppView.IndoorLED}"
                        key="indoor_led"
                    />
                    <SegmentedButtonItem
                        text="{i18n>AppView.Outdoor}"
                        key="outdoor"
                    />
                </items>
            </SegmentedButton>
            <HBox>
                <ColorPalette
                    colorSelect=".onColorSelect"
                    colors="{
                        path: 'newPollinationsModel>',
                        formatter: '.getAvailableColorsForUnsavedPollination'
                    }"
                />
                <FlexBox alignItems="Center">
                    <core:Icon
                        src="sap-icon://color-fill"
                        color="{
                            path: 'newPollinationsModel>label_color_rgb'
                        }"
                        size="3rem"
                    >
                        <core:layoutData>
                            <FlexItemData growFactor="1" />
                        </core:layoutData>
                    </core:Icon>
                </FlexBox>
            </HBox>
        </VBox>
        <!-- buttons -->
        <HBox
            justifyContent="SpaceBetween"
            class="sapUiTinyMarginTop"
        >
            <Button
                text="Discard"
                type="Negative"
                press=".onPressDeleteNewPollinationButton"
            />
            <Button
                enabled="{= !!${newPollinationsModel>label_color_rgb} &amp;&amp;
                    ${newPollinationsModel>label_color_rgb} !== 'transparent'}"
                text="Save"
                type="Emphasized"
                press=".onPressSaveNewPollinationButton"
            />
        </HBox>
    </VBox>
</c:FragmentDefinition>