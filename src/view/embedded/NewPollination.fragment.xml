<c:FragmentDefinition
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:card="sap.f.cards"
    xmlns:core="sap.ui.core"
    xmlns:c="sap.ui.core"
>
    <f:Card
        class="sapUiMediumMargin"
        width="300px"
    >
        <f:header>
            <card:Header
                title="New pollination attempt"
                subtitle="Plant: {newTempPollinationInput>/florescencePlantName}"
                iconSrc="sap-icon://add"
                iconBackgroundColor="Accent5"
            />
        </f:header>
        <f:content>
            <VBox class="sapUiSmallMargin">
                <VBox class="sapUiTinyMarginBottom">
                    <Input
                        id="florescencePlantNameInput"
                        value="{newTempPollinationInput>/florescencePlantId} {newTempPollinationInput>/florescencePlantName}"
                        editable="false"
                        tooltip="{newTempPollinationInput>/florescencePlantId} {newTempPollinationInput>/florescencePlantName}"
                    />
                    <HBox>
                        <Input
                            id="pollenDonorPlantNameInput"
                            value="{newTempPollinationInput>/pollen_donor_plant_id} {newTempPollinationInput>/pollenDonorPlantName}"
                            editable="false"
                            tooltip="{newTempPollinationInput>/pollen_donor_plant_id} {newTempPollinationInput>/pollenDonorPlantName}"
                        />
                        <Switch
                            state="{newTempPollinationInput>/goodPollenQuality}"
                            customTextOn="+"
                            customTextOff="-"
                            tooltip="Pollen Quality: Good / Bad"
                        >
                            <layoutData>
                                <FlexItemData growFactor="1" />
                            </layoutData>
                        </Switch>
                    </HBox>
                </VBox>
                <HBox
                    justifyContent="SpaceBetween"
                    alignItems="Center"
                    class="sapUiTinyMarginBottom"
                >
                    <DateTimePicker
                        width="11rem"
                        id="newTempPollinationDateTimePicker"
                        displayFormat="yyyy-MM-dd HH:mm"
                        valueFormat="yyyy-MM-dd HH:mm"
                        value="{
                            path: 'newTempPollinationInput>/pollinated_at'
                        }"
                        placeholder="Enter Date"
                        showCurrentTimeButton="true"
                    />
                    <GenericTag
                        text="{
                            path: 'newTempPollinationInput>/pollen_type'
                        }"
                        design="StatusIconHidden"
                        status="{= (${newTempPollinationInput>/pollen_type} === 'fresh' ? 'Success' : 'Information') }"
                    />
                </HBox>
                <!-- <HBox> -->
                <SegmentedButton
                    selectedKey="{
                        path: 'newTempPollinationInput>/location'
                    }"
                    class="sapUiTinyMarginBottom"
                    width="14rem"
                >
                    <items>
                        <SegmentedButtonItem
                            text="{i18n>AppView.Indoor}"
                            key="indoor"
                        />
                        <SegmentedButtonItem
                            text="{i18n>AppView.IndoorLED}"
                            key="indoor_led"
                        />
                        <SegmentedButtonItem
                            text="{i18n>AppView.Outdoor}"
                            key="outdoor"
                        />
                    </items>
                </SegmentedButton>
                <!-- </HBox> -->
                <HBox>
                    <ColorPalette
                        id="newTempPollinationColorPalette"
                        colorSelect=".onColorSelect"
                        colors="{
                            path: 'newTempPollinationInput>/availableColorsRgb'
                        }"
                    />
                    <FlexBox alignItems="Center">
                        <core:Icon
                            src="sap-icon://color-fill"
                            color="{
                                path: 'newTempPollinationInput>/label_color_rgb'
                            }"
                            size="3rem"
                        >
                            <core:layoutData>
                                <FlexItemData growFactor="1" />
                            </core:layoutData>
                        </core:Icon>
                    </FlexBox>
                </HBox>
                <HBox justifyContent="SpaceBetween">
                    <StepInput
                        description="Flowers"
                        max="9"
                        min="1"
                        required="true"
                        textAlign="Center"
                        value="{newTempPollinationInput>/count_attempted}"
                    />
                    <FlexBox>
                        <Button
                            enabled="{=
                                !!${newTempPollinationInput>/florescencePlantName} 
                                &amp;&amp; !!${newTempPollinationInput>/pollenDonorPlantName} 
                                &amp;&amp; ${newTempPollinationInput>/florescenceStatus} === 'flowering' 
                            }"
                            text="{i18n>AppView.Preview}"
                            type="Emphasized"
                            press=".onPressAddAsPollinationPreview"
                        />
                    </FlexBox>
                </HBox>
            </VBox>
        </f:content>
    </f:Card>
</c:FragmentDefinition>