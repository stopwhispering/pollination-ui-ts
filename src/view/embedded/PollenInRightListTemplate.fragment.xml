<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
	xmlns:custom="pollination.ui.control"
    core:require="{
        Helper: 'pollination/ui/util/Helper'
    }"
>
    <CustomListItem highlight="{=
        (${potentialPollenDonorsModel>already_ongoing_attempt} ? 'Error' : 'None') 
       }">
        <HBox>
            <!-- <CheckBox selected="{completed}"  /> -->
            <HBox justifyContent="Center">
                <custom:HoverImage
                    width="80px"
                    densityAware="true"
                    visible="{= !!${potentialPollenDonorsModel>plant_preview_image_id} }"
                    src="{
                        path: 'potentialPollenDonorsModel>plant_preview_image_id',
                        formatter: '.formatter.getImageUrlAvatarL'
                    }"
                    plantName="{potentialPollenDonorsModel>plant_name}"
                    plantId="{potentialPollenDonorsModel>plant_id}"
                    hoverPress=".onHoverPressPreviewImage"
                    />
                <Text
                    text="{potentialPollenDonorsModel>plant_id}"
                    class="sapUiTinyMarginBegin"
                    width="2.0rem"
                />
                <Text
                    text="{potentialPollenDonorsModel>plant_name}"
                    class="sapUiTinyMarginBeginEnd"
                    width="16rem"
                />
                <FormattedText
                    width="2.5rem"
                    htmlText="{
                        parts: ['potentialPollenDonorsModel>probability_pollination_to_seed'],
                        formatter: '.formatter.html_for_pollination_probability'
                    }"
                    tooltip="{= ${potentialPollenDonorsModel>probability_pollination_to_seed}.toString() + '%' }"
                    class="sapUiTinyMarginBeginEnd"
                />
                <HBox
                    wrap="Wrap"
                    width="5.5rem"
                    items="{
                        path: 'potentialPollenDonorsModel>pollination_attempts',
                        templateShareable: false
                    }"
                >
                    <CustomListItem>
                    
                        <custom:PollinationIndicator 
                            pollinationStatus="{potentialPollenDonorsModel>pollination_status}"
                            ongoing="{potentialPollenDonorsModel>ongoing}"
                            reverse="{potentialPollenDonorsModel>reverse}"
                            
                            size="1.6rem" 
                            press=".pressHistoricalPollinationIndicator"
                            hover=".hoverHistoricalPollinationIndicator"
                            />

                    </CustomListItem>
                </HBox>

                <!-- todo move to popover above -->
                <FormattedText
                    width="4.5rem"
                    htmlText="{
                        path: 'potentialPollenDonorsModel>count_stored_pollen_containers',
                        formatter: '.formatter.html_for_count_stored_pollen_containers'
                    }"
                    tooltip="{= ${potentialPollenDonorsModel>count_stored_pollen_containers} +
                        ' container(s) left' }"
                    class="sapUiTinyMarginBeginEnd"
                />
            </HBox>
        </HBox>
    </CustomListItem>
</core:FragmentDefinition>