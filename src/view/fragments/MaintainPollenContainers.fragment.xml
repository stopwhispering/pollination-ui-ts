<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
 
    <Dialog 
        id="maintainPollenContainers"
    	title='Maintain frozen Pollen Containers'
		class="sapUiContentPadding"
		afterClose=".onAfterClosemaintainPollenContainers">
 
	    <content>
        
            <List
                items="{ 
                    path: 'pollenContainersModel>/pollen_container_collection',
                    sorter: [{ path: 'genus',
                               descending: 'true',
                               group: '.getGenusGroup' }]
                    }"
                showSeparators="Inner"
                class="sapUiSmallMargin"
                >
                <CustomListItem>
                        <HBox>
                            <Text 
                                text="{pollenContainersModel>plant_id}"
                                class="sapUiTinyMarginBegin"
                                width="1.6rem"/>
                            <Text 
                                text="{pollenContainersModel>plant_name}"
                                class="sapUiTinyMarginBegin"
                                width="16rem"/>
                            <StepInput
                                value="{pollenContainersModel>count_stored_pollen_containers}"
                                min="0"
                                max="15"
                                width="6rem"
                                class="sapUiMediumMarginEnd"/>
                            <FormattedText
                                width="4.5rem"
                                htmlText="{
                                    path: 'pollenContainersModel>count_stored_pollen_containers',
                                    formatter: '.formatter.html_for_count_stored_pollen_containers'
                                }"/>

                        </HBox>
                </CustomListItem>
            </List>

            <HBox>
                <ComboBox
                    id="newPlantPollenContainer"
                    items="{
                        path: 'pollenContainersModel>/plants_without_pollen_container_collection',
                        sorter: { path: 'plant_name' }
                    }"
                    class="sapUiTinyMarginEnd"
                    width="15rem">
                    <core:Item 
                        key="{pollenContainersModel>plant_id}" 
                        text="{pollenContainersModel>plant_id} {pollenContainersModel>plant_name}" />
                </ComboBox>

                <StepInput
                    id="newPlantPollenContainerCount"
                    min="0"
                    max="15"
                    width="6rem"
                    class="sapUiMediumMarginEnd"/>

                <Button
                    text="{i18n>MaintainPollenContainersFragment.Add}"
                    press=".onPressAddPlantForPollenContainer"/>

            </HBox>

		</content>

		<beginButton>
			<Button
				type="Emphasized"
				text="{i18n>MaintainPollenContainersFragment.Submit}"
				press=".onPressSubmitPollenContainers"/>
		</beginButton>
		
		<endButton>
			<Button
				text="{i18n>MaintainPollenContainersFragment.Cancel}"
				press=".onCancelDialog('maintainPollenContainers')"/>
		</endButton>				
    </Dialog>
</core:FragmentDefinition>