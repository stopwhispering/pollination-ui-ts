<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
>
	<Dialog
		id="editPollination"
		title="Edit Pollination (ID {editedPollinationModel>/id})"
		class="sapUiContentPadding"
		afterClose=".onAfterCloseEditPollinationDialog"
		contentWidth="28rem"
	>
		<content>
			<VBox>
				<FormattedText
					htmlText="&lt;strong&gt;{
						path: 'editedPollinationModel>/seed_capsule_plant_id'
					}&lt;/strong&gt; 
						{
						path: 'editedPollinationModel>/seed_capsule_plant_name'
					} &lt;strong&gt;â˜“&lt;/strong&gt; 
						&lt;strong&gt;{
						path: 'editedPollinationModel>/pollen_donor_plant_id'
					}&lt;/strong&gt; 
						{
						path: 'editedPollinationModel>/pollen_donor_plant_name'
					}"
					class="sapUiSmallMarginBottom"
				/>
				<Label text="{i18n>EditPollinationFragment.PollinationAt}"/>
				<HBox class="sapUiTinyMarginBottom">
					<CheckBox selected="{editedPollinationModel>/pollination_timestamp_known}"/>
					<MaskInput
						enabled="{editedPollinationModel>/pollination_timestamp_known}"
						value="{editedPollinationModel>/pollination_timestamp}"
						mask="9999-99-99 99:99"
						width="8.5rem"
					/>
				</HBox>
				<Label text="{i18n>EditPollinationFragment.HarvestAt}"/>
				<HBox class="sapUiTinyMarginBottom">
					<CheckBox selected="{editedPollinationModel>/harvest_date_known}"/>
					<MaskInput
						enabled="{editedPollinationModel>/harvest_date_known}"
						value="{editedPollinationModel>/harvest_date}"
						mask="9999-99-99"
						width="6rem"
					/>
					<Button
						icon="sap-icon://calendar"
						type="Transparent"
						enabled="{editedPollinationModel>/harvest_date_known}"
						press=".onSetToday('editedPollinationModel', 'harvest_date')"
					/>
				</HBox>
				<SegmentedButton
					selectedKey="{
						path: 'editedPollinationModel>/location'
					}"
					class="sapUiTinyMarginBottom"
				>
					<items>
						<SegmentedButtonItem
							text="{i18n>EditPollinationFragment.Indoor}"
							key="indoor"
						/>
						<SegmentedButtonItem
							text="{i18n>EditPollinationFragment.IndoorLED}"
							key="indoor_led"
						/>
						<SegmentedButtonItem
							text="{i18n>EditPollinationFragment.Outdoor}"
							key="outdoor"
						/>
					</items>
				</SegmentedButton>
				<SegmentedButton
					selectedKey="{
						path: 'editedPollinationModel>/pollen_type'
					}"
					class="sapUiTinyMarginBottom"
				>
					<items>
						<SegmentedButtonItem
							text="{i18n>EditPollinationFragment.Fresh}"
							key="fresh"
						/>
						<SegmentedButtonItem
							text="{i18n>EditPollinationFragment.Frozen}"
							key="frozen"
						/>
					</items>
				</SegmentedButton>
				<HBox
					alignItems="Center"
					class="sapUiTinyMarginBottom"
				>
					<core:Icon
						src="sap-icon://color-fill"
						color="{
							path: 'editedPollinationModel>/label_color_rgb'
						}"
						size="3rem"
						tooltip="{
							path: 'editedPollinationModel>/label_color_rgb'
						}"
						class="sapUiTinyMarginEnd"
					/>
					<Button
						text="Pick Color"
						press="onOpenColorPalettePopover"
						icon="sap-icon://color-fill"
					/>
				</HBox>
				<SegmentedButton
					selectedKey="{
						path: 'editedPollinationModel>/pollination_status'
					}"
					class="sapUiTinyMarginBottom"
					items="{
						path: 'settingsModel>/pollination_status'
					}"
				>
					<items>
						<SegmentedButtonItem
							text="{settingsModel>text}"
							key="{settingsModel>key}"
						/>
					</items>
				</SegmentedButton>
				<HBox class="sapUiTinyMarginBottom">
					<VBox>
						<Label text="{i18n>EditPollinationFragment.Capsule}"/>
						<HBox class="sapUiTinyMarginEnd">
							<VBox>
								<Label text="Length"/>
								<Input
									value="{editedPollinationModel>/seed_capsule_length}"
									width="5rem"
									class="sapUiTinyMarginEnd"
									change=".onChangeInputPreventNonFloat"
								/>
							</VBox>
							<VBox>
								<Label text="{i18n>EditPollinationFragment.Width}"/>
								<Input
									value="{editedPollinationModel>/seed_capsule_width}"
									width="5rem"
									change=".onChangeInputPreventNonFloat"
								/>
							</VBox>
						</HBox>
					</VBox>
					<VBox>
						<Label text="{i18n>EditPollinationFragment.Seed}"/>
						<HBox>
							<VBox>
								<Label text="{i18n>EditPollinationFragment.Length}"/>
								<Input
									value="{editedPollinationModel>/seed_length}"
									width="5rem"
									class="sapUiTinyMarginEnd"
									change=".onChangeInputPreventNonFloat"
								/>
							</VBox>
							<VBox>
								<Label text="Width"/>
								<Input
									value="{editedPollinationModel>/seed_width}"
									width="5rem"
									change=".onChangeInputPreventNonFloat"
								/>
							</VBox>
						</HBox>
					</VBox>
				</HBox>
				<VBox class="sapUiTinyMarginBottom">
					<Label text="{i18n>EditPollinationFragment.SeedsCount}"/>
					<Input
						value="{editedPollinationModel>/seed_count}"
						width="3rem"
						change=".onChangeInputPreventNonInt"
					/>
				</VBox>
				<VBox class="sapUiTinyMarginBottom">
					<Label text="{i18n>EditPollinationFragment.CapsuleDescription}"/>
					<TextArea
						value="{editedPollinationModel>/seed_capsule_description}"
						maxLength="400"
						width="100%"
					/>
				</VBox>
				<VBox class="sapUiTinyMarginBottom">
					<Label text="{i18n>EditPollinationFragment.SeedDescription}"/>
					<TextArea
						value="{editedPollinationModel>/seed_description}"
						maxLength="400"
						width="100%"
					/>
				</VBox>
				<VBox class="sapUiTinyMarginBottom">
					<Label text="{i18n>EditPollinationFragment.DaysUntilFirstSeedGerminated}"/>
					<Input
						value="{editedPollinationModel>/days_until_first_germination}"
						width="3rem"
						change=".onChangeInputPreventNonInt"
					/>
				</VBox>
				<HBox>
					<VBox>
						<HBox>
							<VBox
								class="sapUiTinyMarginEnd"
								width="6rem"
							>
								<Label text="{i18n>EditPollinationFragment.SeedsSown}"/>
								<Input
									value="{editedPollinationModel>/first_seeds_sown}"
									change=".onChangeInputCalcGerminationRate"
								/>
							</VBox>
							<VBox
								class="sapUiSmallMarginEnd"
								width="6rem"
							>
								<Label text="{i18n>EditPollinationFragment.Germinated}"/>
								<Input
									value="{editedPollinationModel>/first_seeds_germinated}"
									change=".onChangeInputCalcGerminationRate"
								/>
							</VBox>
							<VBox width="6rem">
								<Label text="{i18n>EditPollinationFragment.GermRate}"/>
								<Input
									value="{editedPollinationModel>/germination_rate} %"
									editable="false"
								/>
							</VBox>
						</HBox>
					</VBox>
				</HBox>
			</VBox>
		</content>
		<buttons>
			<Button
				text="{i18n>EditPollinationFragment.Delete}"
				icon="sap-icon://delete"
				press=".onPressDeletePollination"
				type="Negative"
			/>
			<Button
				type="{i18n>EditPollinationFragment.Emphasized}"
				text="Submit"
				press=".onPressSubmitEditPollination(false)"
			/>
			<Button
				type="{i18n>EditPollinationFragment.Emphasized}"
				text="Submit &amp; Set Finished"
				press=".onPressSubmitEditPollinationAndFinish"
			/>
			<Button
				text="{i18n>EditPollinationFragment.Cancel}"
				press=".onCancelDialog('editPollination')"
			/>
		</buttons>
	</Dialog>
</core:FragmentDefinition>