<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
	xmlns:core="sap.ui.core"
>
	<Dialog
		id="editPollination"
		title="Edit Pollination (ID {editPollinationInput>/id})"
		class="sapUiContentPadding"
		afterClose=".onAfterCloseEditPollinationDialog"
		contentWidth="32rem"
	>
		<content>
			<FormattedText
				htmlText="&lt;strong&gt;{
					path: 'editPollinationInput>/seed_capsule_plant_id'
				}&lt;/strong&gt; 
					{
					path: 'editPollinationInput>/seed_capsule_plant_name'
				} &lt;strong&gt;â˜“&lt;/strong&gt; 
					&lt;strong&gt;{
					path: 'editPollinationInput>/pollen_donor_plant_id'
				}&lt;/strong&gt; 
					{
					path: 'editPollinationInput>/pollen_donor_plant_name'
				}"
				class="sapUiSmallMarginBottom"
			/>
			<SegmentedButton
				selectedKey="{
					path: 'editPollinationInput>/pollination_status'
				}"
				class="sapUiTinyMarginBottom"
				items="{
					path: 'local>/pollinationStatusCollection'
				}"
			>
				<items>
					<SegmentedButtonItem
						text="{local>text}"
						key="{local>key}"
						enabled="{local>enabled}"
						tooltip="{local>tooltip}"
					/>
				</items>
			</SegmentedButton>
			<IconTabBar
				id="editPollinationIconTabBar"
				expanded="{device>/isNoPhone}"
				class="sapUiResponsiveContentPadding"
				backgroundDesign="Transparent"
			>
				<items>
					<IconTabFilter
						text="Pollination Details"
						key="icon_tab_pollination_details"
					>
						<VBox>
							<Label text="{i18n>EditPollinationFragment.PollinationAt}"/>
							<HBox class="sapUiTinyMarginBottom">
								<CheckBox selected="{editPollinationInput>/pollinated_at_known}"/>
								<MaskInput
									enabled="{editPollinationInput>/pollinated_at_known}"
									value="{editPollinationInput>/pollinated_at}"
									mask="9999-99-99 99:99"
									width="8.5rem"
								/>
							</HBox>
							<Label text="{i18n>EditPollinationFragment.HarvestAt}"/>
							<HBox class="sapUiTinyMarginBottom">
								<CheckBox selected="{editPollinationInput>/harvest_date_known}"/>
								<MaskInput
									id="inpHarvestDate"
									enabled="{editPollinationInput>/harvest_date_known}"
									value="{editPollinationInput>/harvest_date}"
									mask="9999-99-99"
									width="6rem"
								/>
								<Button
									icon="sap-icon://calendar"
									type="Transparent"
									enabled="{editPollinationInput>/harvest_date_known}"
									press=".onPressEditPollinationSetToday"
									app:inputId="inpHarvestDate"
								/>
							</HBox>
							<SegmentedButton
								selectedKey="{
									path: 'editPollinationInput>/location'
								}"
								class="sapUiTinyMarginBottom"
							>
								<items>
									<SegmentedButtonItem
										text="{i18n>EditPollinationFragment.Indoor}"
										key="indoor"
									/>
									<SegmentedButtonItem
										text="{i18n>EditPollinationFragment.IndoorLED}"
										key="indoor_led"
									/>
									<SegmentedButtonItem
										text="{i18n>EditPollinationFragment.Outdoor}"
										key="outdoor"
									/>
								</items>
							</SegmentedButton>
							<SegmentedButton
								selectedKey="{
									path: 'editPollinationInput>/pollen_type'
								}"
								class="sapUiTinyMarginBottom"
							>
								<items>
									<SegmentedButtonItem
										text="{i18n>EditPollinationFragment.Fresh}"
										key="fresh"
									/>
									<SegmentedButtonItem
										text="{i18n>EditPollinationFragment.Frozen}"
										key="frozen"
									/>
								</items>
							</SegmentedButton>
							<StepInput
								description="Flowers"
								max="4"
								min="1"
								required="true"
								textAlign="Center"
								width="11rem"
								value="{editPollinationInput>/count_attempted}"
							/>
							<HBox class="sapUiTinyMarginBottom">
								<CheckBox 
									selected="{editPollinationInput>/count_pollinated_known}"
									tooltip="Count Pollinations known"/>
								<StepInput
									description="Pollinated"
									enabled="{editPollinationInput>/count_pollinated_known}"
									max="4"
									min="1"
									required="true"
									textAlign="Center"
									width="14rem"
									value="{editPollinationInput>/count_pollinated}"
								/>
							</HBox>
							<HBox
								alignItems="Center"
								class="sapUiTinyMarginBottom"
							>
								<core:Icon
									src="sap-icon://color-fill"
									color="{
										path: 'editPollinationInput>/label_color_rgb'
									}"
									size="3rem"
									tooltip="{
										path: 'editPollinationInput>/label_color_rgb'
									}"
									class="sapUiTinyMarginEnd"
								/>
								<Button
									text="Pick Color"
									press="onOpenColorPalettePopover"
									icon="sap-icon://color-fill"
								/>
							</HBox>
						</VBox>
					</IconTabFilter>
					<IconTabFilter
						text="Seed Details"
						enabled="{= ['seed', 'germinated'].includes(${editPollinationInput>/pollination_status}) }"
						key="icon_tab_seed_details"
					>
						<VBox>
							<HBox class="sapUiTinyMarginBottom">
								<CheckBox 
									selected="{editPollinationInput>/count_capsules_known}"
									tooltip="Count Capsules known"/>
								<StepInput
									description="Capsules"
									enabled="{editPollinationInput>/count_capsules_known}"
									max="4"
									min="1"
									required="true"
									textAlign="Center"
									width="14rem"
									value="{editPollinationInput>/count_capsules}"
								/>
							</HBox>
							<HBox class="sapUiTinyMarginBottom">
								<VBox>
									<Label text="{i18n>EditPollinationFragment.Capsule}"/>
									<HBox class="sapUiTinyMarginEnd">
										<VBox>
											<Label text="Length"/>
											<Input
												value="{editPollinationInput>/seed_capsule_length}"
												width="5rem"
												class="sapUiTinyMarginEnd"
												change=".onChangeInputPreventNonFloat"
											/>
										</VBox>
										<VBox>
											<Label text="{i18n>EditPollinationFragment.Width}"/>
											<Input
												value="{editPollinationInput>/seed_capsule_width}"
												width="5rem"
												change=".onChangeInputPreventNonFloat"
											/>
										</VBox>
									</HBox>
								</VBox>
								<VBox>
									<Label text="{i18n>EditPollinationFragment.Seed}"/>
									<HBox>
										<VBox>
											<Label text="{i18n>EditPollinationFragment.Length}"/>
											<Input
												value="{editPollinationInput>/seed_length}"
												width="5rem"
												class="sapUiTinyMarginEnd"
												change=".onChangeInputPreventNonFloat"
											/>
										</VBox>
										<VBox>
											<Label text="Width"/>
											<Input
												value="{editPollinationInput>/seed_width}"
												width="5rem"
												change=".onChangeInputPreventNonFloat"
											/>
										</VBox>
									</HBox>
								</VBox>
							</HBox>
							<VBox class="sapUiTinyMarginBottom">
								<Label text="{i18n>EditPollinationFragment.SeedsCount}"/>
								<Input
									value="{editPollinationInput>/seed_count}"
									width="3rem"
									change=".onChangeInputPreventNonInt"
								/>
							</VBox>
							<VBox class="sapUiTinyMarginBottom">
								<Label text="{i18n>EditPollinationFragment.CapsuleDescription}"/>
								<TextArea
									value="{editPollinationInput>/seed_capsule_description}"
									maxLength="400"
									width="100%"
								/>
							</VBox>
							<VBox class="sapUiTinyMarginBottom">
								<Label text="{i18n>EditPollinationFragment.SeedDescription}"/>
								<TextArea
									value="{editPollinationInput>/seed_description}"
									maxLength="400"
									width="100%"
								/>
							</VBox>
						</VBox>
					</IconTabFilter>
				</items>
			</IconTabBar>
		</content>
		<buttons>
			<Button
				text="{i18n>EditPollinationFragment.Delete}"
				icon="sap-icon://delete"
				press=".onPressDeletePollination"
				type="Negative"
			/>
			<Button
				type="{i18n>EditPollinationFragment.Emphasized}"
				text="Submit"
				press=".onPressSubmitEditPollination(false)"
			/>
			<Button
				type="{i18n>EditPollinationFragment.Emphasized}"
				text="Submit &amp; Set Finished"
				press=".onPressSubmitEditPollinationAndFinish"
			/>
			<Button
				text="{i18n>EditPollinationFragment.Cancel}"
				press=".onCancelEditPollinationDialog"
			/>
		</buttons>
	</Dialog>
</core:FragmentDefinition>